# NetworkPool

* Началось все с того, чтo на хабре нашел статью о производительном и "не жадном" tcp сервере, который работает в несколько потоков. Сервер был написан на С++, и я решил что-то подобное изобразить на C#. 
* В процессе изучения наткнулся на статью, в которой обсуждалась производительнсть различныx конфигураций при межпотоковом взаимодействии. Автор утверждал, что лучшая производительность достигается при использовании пакета System.Threading.Channels. 
* Первая реализация имела в основе комбинированное использование ConcurentQueue и Channel из пакета выше. По результатам теста получил 3852 ms на 500 обращениях. Как проходит измерение можно посмотреть в TcpClientTest. 
* Затем была новая реализация, я избавился от очереди и использовал два канала для обмена. В итоге, при том же количестве обращений получил время 1623 ms. Производительность увеличилась более чем в 2 раза, сервер работает без лишних блокировок. 
* Еще обратил внимание на странное поведение Socket в C# при использовании его в Non Blocking mode. Вызвало недоумение, зачем выбрасывать исключение при операции чтения в этом режиме.
